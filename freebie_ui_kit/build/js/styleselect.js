!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){var e=document.querySelector.bind(document),t=document.querySelectorAll.bind(document),a={SPACE:32,UP:38,DOWN:40,ENTER:13};NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach),HTMLCollection.prototype.forEach||(HTMLCollection.prototype.forEach=Array.prototype.forEach),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector);var n=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a};if(n.prototype=window.Event.prototype,window.CustomEvent=n,!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(Element.prototype,"dataset")&&Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var o={enumerable:!0,get:function(){"use strict";var e,t,a,n,o,r,s=this,i=this.attributes,c=i.length,d=function(e){return e.charAt(1).toUpperCase()},l=function(){return this},u=function(e,t){return"undefined"!=typeof t?this.setAttribute(e,t):this.removeAttribute(e)};try{({}).__defineGetter__("test",function(){}),t={}}catch(p){t=document.createElement("div")}for(e=0;e<c;e++)if(r=i[e],r&&r.name&&/^data-\w[\w\-]*$/.test(r.name)){a=r.value,n=r.name,o=n.substr(5).replace(/-./g,d);try{Object.defineProperty(t,o,{enumerable:this.enumerable,get:l.bind(a||""),set:u.bind(s,n)})}catch(f){t[o]=a}}return t}};try{Object.defineProperty(Element.prototype,"dataset",o)}catch(r){o.enumerable=!1,Object.defineProperty(Element.prototype,"dataset",o)}}var s=function(e,t,a){var n=e.parentNode;if(a&&e.matches(t))return!0;for(;n&&n.nodeType&&1===n.nodeType;){if(n.matches(t))return!0;n=n.parentNode}return!1},i=function(){return"ss-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,function(e){var t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)})};return function(o){if(!navigator.userAgent.match(/iPad|iPhone|Android/i)){var r,c=e(o),d=c.children,l=c.selectedIndex,u=i(),p='<div class="style-select" aria-hidden="true" data-ss-uuid="'+u+'">',f=d.length-1;c.setAttribute("data-ss-uuid",u),c.setAttribute("aria-hidden","false");var v,h='<div class="ss-dropdown">';d.forEach(function(e,t){var a=e.textContent,n=e.getAttribute("value")||"",o="ss-option",r="Select Something";t===l&&(v='<div class="ss-selected-option" tabindex="0" data-value="Select Something">'+r+"</div>"),e.disabled&&(o+=" disabled"),h+='<div class="'+o+'" data-value="'+n+'">'+a+"</div>"}),h+="</div>",p+=v+=h+="</div>",c.insertAdjacentHTML("afterend",p);var m=e('.style-select[data-ss-uuid="'+u+'"]'),y=m.querySelectorAll(".ss-option"),E=m.querySelector(".ss-selected-option"),b=function(e,t){m.classList.remove("open"),E.textContent=t,E.dataset.value=e,y.forEach(function(t){t.dataset.value===e?t.classList.add("ticked"):t.classList.remove("ticked")}),c.value=e;var a=new n("change");c.dispatchEvent(a)};y.forEach(function(e,t){var a=y.item(t);a.className.match(/\bdisabled\b/)||(a.addEventListener("click",function(e){var t=e.target,a=t.parentNode.parentNode,n=(a.getAttribute("data-ss-uuid"),t.getAttribute("data-value")),o=t.textContent;b(n,o)}),a.dataset.value===c.value&&(r=t,a.classList.add("ticked"),a.classList.add("highlighted")),a.addEventListener("mouseover",function(e){a.parentNode.childNodes.forEach(function(t,a){t===e.target?(t.classList.add("highlighted"),r=a):t.classList.remove("highlighted")})}))});var g=function(e){t(".style-select").forEach(function(t){t!==e&&t.classList.remove("open")})},x=document.querySelectorAll(".ss-selected-option")[0],L=function(e){e.classList.contains("open")?x.classList.remove("gray"):(x.classList.add("gray"),g(e)),e.classList.toggle("open")},A=e('.style-select[data-ss-uuid="'+u+'"] .ss-selected-option');A.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),L(e.target.parentNode)}),A.addEventListener("keydown",function(e){var t=e.target.parentNode;switch(e.keyCode){case a.SPACE:L(t);break;case a.DOWN:case a.UP:t.classList.contains("open")?(e.keyCode===a.UP?0!==r&&(r-=1):r<f&&(r+=1),y.forEach(function(e,t){t===r?e.classList.add("highlighted"):e.classList.remove("highlighted")})):L(t),e.preventDefault(),e.stopPropagation();break;case a.ENTER:var n=A.parentNode.querySelectorAll(".ss-option")[r],o=n.dataset.value,s=n.textContent;b(o,s),e.preventDefault(),e.stopPropagation()}}),e("body").addEventListener("click",function(e){s(e.target,".style-select",!0)||g()})}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0eWxlc2VsZWN0LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJldHVybkV4cG9ydHMiLCJ0aGlzIiwicXVlcnkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJiaW5kIiwicXVlcnlBbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiS0VZQ09ERVMiLCJTUEFDRSIsIlVQIiwiRE9XTiIsIkVOVEVSIiwiTm9kZUxpc3QiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiQXJyYXkiLCJIVE1MQ29sbGVjdGlvbiIsIkVsZW1lbnQiLCJtYXRjaGVzIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwiQ3VzdG9tRXZlbnQiLCJldmVudE5hbWUiLCJwYXJhbXMiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRldGFpbCIsInVuZGVmaW5lZCIsImV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJ3aW5kb3ciLCJFdmVudCIsImRvY3VtZW50RWxlbWVudCIsImRhdGFzZXQiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXQiLCJwcm9wRGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJpIiwiSFRNTDVfRE9NU3RyaW5nTWFwIiwiYXR0clZhbCIsImF0dHJOYW1lIiwicHJvcE5hbWUiLCJhdHRyaWJ1dGUiLCJ0aGF0IiwiYXR0cmlidXRlcyIsImF0dHNMZW5ndGgiLCJsZW5ndGgiLCJ0b1VwcGVyQ2FzZSIsIm4wIiwiY2hhckF0IiwiZ2V0dGVyIiwic2V0dGVyIiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfX2RlZmluZUdldHRlcl9fIiwiZTEiLCJjcmVhdGVFbGVtZW50IiwibmFtZSIsInRlc3QiLCJzdWJzdHIiLCJyZXBsYWNlIiwiZGVmaW5lUHJvcGVydHkiLCJzZXQiLCJlMiIsImUiLCJpc0FuY2VzdG9yT2YiLCJlbGVtZW50Iiwic2VsZWN0b3IiLCJpbmNsdWRlU2VsZiIsInBhcmVudCIsInBhcmVudE5vZGUiLCJub2RlVHlwZSIsIm1ha2VVVUlEIiwiYyIsInIiLCJNYXRoIiwicmFuZG9tIiwidiIsInRvU3RyaW5nIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWF0Y2giLCJoaWdobGlnaHRlZE9wdGlvbkluZGV4IiwicmVhbFNlbGVjdCIsInJlYWxPcHRpb25zIiwiY2hpbGRyZW4iLCJzZWxlY3RlZEluZGV4IiwidXVpZCIsInN0eWxlU2VsZWN0SFRNTCIsImhpZ2hsaWdodGVkT3B0aW9uSW5kZXhNYXgiLCJzZWxlY3RlZE9wdGlvbkhUTUwiLCJvcHRpb25zSFRNTCIsInJlYWxPcHRpb24iLCJpbmRleCIsInRleHQiLCJ0ZXh0Q29udGVudCIsImdldEF0dHJpYnV0ZSIsImNzc0NsYXNzIiwidGV4dDIiLCJkaXNhYmxlZCIsImluc2VydEFkamFjZW50SFRNTCIsInN0eWxlZFNlbGVjdCIsInN0eWxlU2VsZWN0T3B0aW9ucyIsInNlbGVjdGVkT3B0aW9uIiwiY2hhbmdlUmVhbFNlbGVjdEJveCIsIm5ld1ZhbHVlIiwibmV3TGFiZWwiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJzdHlsZVNlbGVjdE9wdGlvbiIsImFkZCIsImNoYW5nZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInVudXNlZCIsIml0ZW0iLCJjbGFzc05hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJ0YXJnZXQiLCJzdHlsZWRTZWxlY3RCb3giLCJjaGlsZE5vZGVzIiwic2libGluZyIsImNsb3NlQWxsU3R5bGVTZWxlY3RzIiwiZXhjZXB0aW9uIiwic3R5bGVTZWxlY3RFbCIsInNlbGVjdEdyYXkiLCJ0b2dnbGVTdHlsZWRTZWxlY3QiLCJjb250YWlucyIsInRvZ2dsZSIsInN0eWxlZFNlbGVjdGVkT3B0aW9uIiwicHJldmVudERlZmF1bHQiLCJz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QUFNLFFBQVF5SCxpQkFBaUIsUUFBUyxTQUFTQyxHQUV6Q3BELEVBQWFvRCxFQUFHQyxPQUFRLGlCQUFpQixJQUMvQ0kiLCJmaWxlIjoic3R5bGVzZWxlY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XHJcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXHJcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxyXG4gICAgICAgIHJvb3QucmV0dXJuRXhwb3J0cyA9IGZhY3RvcnkoKTtcclxuICB9XHJcbn0odGhpcywgZnVuY3Rpb24gKCkge1xyXG4vLyBFbmQgb2YgVU1EIG1vZHVsZVxyXG5cclxuXHQvLyBRdWljayBhbGlhc2VzIGFuZCBwb2x5ZmlsbHMgaWYgbmVlZGVkXHJcblx0dmFyIHF1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcclxuXHR2YXIgcXVlcnlBbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpO1xyXG5cclxuXHR2YXIgS0VZQ09ERVMgPSB7XHJcblx0XHRTUEFDRTogMzIsXHJcblx0XHRVUDogMzgsXHJcblx0XHRET1dOOiA0MCxcclxuXHRcdEVOVEVSOiAxM1xyXG5cdH07XHJcblxyXG5cdGlmICggISBOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCApIHtcclxuXHRcdE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2g7XHJcblx0fVxyXG5cdGlmICggISBIVE1MQ29sbGVjdGlvbi5wcm90b3R5cGUuZm9yRWFjaCApIHtcclxuXHRcdEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mb3JFYWNoID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2g7XHJcblx0fVxyXG5cdGlmICggISBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzICkge1xyXG5cdFx0Ly8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50Lm1hdGNoZXNcclxuXHRcdEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm9NYXRjaGVzU2VsZWN0b3JcclxuXHR9XHJcblxyXG5cdC8vIElFIDktMTEgQ3VzdG9tRXZlbnQgcG9seWZpbGxcclxuXHQvLyBGcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudFxyXG5cdHZhciBDdXN0b21FdmVudCA9IGZ1bmN0aW9uKCBldmVudE5hbWUsIHBhcmFtcyApIHtcclxuXHRcdHBhcmFtcyA9IHBhcmFtcyB8fCB7IGJ1YmJsZXM6IGZhbHNlLCBjYW5jZWxhYmxlOiBmYWxzZSwgZGV0YWlsOiB1bmRlZmluZWQgfTtcclxuXHRcdHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCAnQ3VzdG9tRXZlbnQnICk7XHJcblx0XHRldmVudC5pbml0Q3VzdG9tRXZlbnQoIGV2ZW50TmFtZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsICk7XHJcblx0XHRyZXR1cm4gZXZlbnQ7XHJcblx0fTtcclxuXHRDdXN0b21FdmVudC5wcm90b3R5cGUgPSB3aW5kb3cuRXZlbnQucHJvdG90eXBlO1xyXG5cdHdpbmRvdy5DdXN0b21FdmVudCA9IEN1c3RvbUV2ZW50O1xyXG5cclxuXHQvLyBJRTEwIGRhdGFzZXQgcG9seWZpbGxcclxuXHQvLyBGcm9tIGh0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20vYnJldHR6OS80MDkzNzY2L3Jhdy9iYTMxYTA1ZTdjZTIxYWY2N2M2Y2FmZWU5YjNmNDM5Yzg2ZTk1YjAxL2h0bWw1LWRhdGFzZXQuanNcclxuXHRpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kYXRhc2V0ICYmXHJcblx0XHRcdCAvLyBGRiBpcyBlbXB0eSB3aGlsZSBJRSBnaXZlcyBlbXB0eSBvYmplY3RcclxuXHRcdFx0KCFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEVsZW1lbnQucHJvdG90eXBlLCAnZGF0YXNldCcpICB8fFxyXG5cdFx0XHQhT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFbGVtZW50LnByb3RvdHlwZSwgJ2RhdGFzZXQnKS5nZXQpXHJcblx0XHQpIHtcclxuXHRcdHZhciBwcm9wRGVzY3JpcHRvciA9IHtcclxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0J3VzZSBzdHJpY3QnO1xyXG5cdFx0XHRcdHZhciBpLFxyXG5cdFx0XHRcdFx0dGhhdCA9IHRoaXMsXHJcblx0XHRcdFx0XHRIVE1MNV9ET01TdHJpbmdNYXAsXHJcblx0XHRcdFx0XHRhdHRyVmFsLCBhdHRyTmFtZSwgcHJvcE5hbWUsXHJcblx0XHRcdFx0XHRhdHRyaWJ1dGUsXHJcblx0XHRcdFx0XHRhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzLFxyXG5cdFx0XHRcdFx0YXR0c0xlbmd0aCA9IGF0dHJpYnV0ZXMubGVuZ3RoLFxyXG5cdFx0XHRcdFx0dG9VcHBlckNhc2UgPSBmdW5jdGlvbiAobjApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIG4wLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpO1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdGdldHRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0c2V0dGVyID0gZnVuY3Rpb24gKGF0dHJOYW1lLCB2YWx1ZSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpID9cclxuXHRcdFx0XHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgdmFsdWUpIDpcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdHRyeSB7IC8vIFNpbXVsYXRlIERPTVN0cmluZ01hcCB3L2FjY2Vzc29yIHN1cHBvcnRcclxuXHRcdFx0XHRcdC8vIFRlc3Qgc2V0dGluZyBhY2Nlc3NvciBvbiBub3JtYWwgb2JqZWN0XHJcblx0XHRcdFx0XHQoe30pLl9fZGVmaW5lR2V0dGVyX18oJ3Rlc3QnLCBmdW5jdGlvbiAoKSB7fSk7XHJcblx0XHRcdFx0XHRIVE1MNV9ET01TdHJpbmdNYXAgPSB7fTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2F0Y2ggKGUxKSB7IC8vIFVzZSBhIERPTSBvYmplY3QgZm9yIElFOFxyXG5cdFx0XHRcdFx0SFRNTDVfRE9NU3RyaW5nTWFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBhdHRzTGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07XHJcblx0XHRcdFx0XHQvLyBGaXg6IFRoaXMgdGVzdCByZWFsbHkgc2hvdWxkIGFsbG93IGFueSBYTUwgTmFtZSB3aXRob3V0XHJcblx0XHRcdFx0XHQvLyAgICAgICAgIGNvbG9ucyAoYW5kIG5vbi11cHBlcmNhc2UgZm9yIFhIVE1MKVxyXG5cdFx0XHRcdFx0aWYgKGF0dHJpYnV0ZSAmJiBhdHRyaWJ1dGUubmFtZSAmJlxyXG5cdFx0XHRcdFx0XHQoL15kYXRhLVxcd1tcXHdcXC1dKiQvKS50ZXN0KGF0dHJpYnV0ZS5uYW1lKSkge1xyXG5cdFx0XHRcdFx0XHRhdHRyVmFsID0gYXR0cmlidXRlLnZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhdHRyTmFtZSA9IGF0dHJpYnV0ZS5uYW1lO1xyXG5cdFx0XHRcdFx0XHQvLyBDaGFuZ2UgdG8gQ2FtZWxDYXNlXHJcblx0XHRcdFx0XHRcdHByb3BOYW1lID0gYXR0ck5hbWUuc3Vic3RyKDUpLnJlcGxhY2UoLy0uL2csIHRvVXBwZXJDYXNlKTtcclxuXHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTDVfRE9NU3RyaW5nTWFwLCBwcm9wTmFtZSwge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZW51bWVyYWJsZTogdGhpcy5lbnVtZXJhYmxlLFxyXG5cdFx0XHRcdFx0XHRcdFx0Z2V0OiBnZXR0ZXIuYmluZChhdHRyVmFsIHx8ICcnKSxcclxuXHRcdFx0XHRcdFx0XHRcdHNldDogc2V0dGVyLmJpbmQodGhhdCwgYXR0ck5hbWUpXHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Y2F0Y2ggKGUyKSB7IC8vIGlmIGFjY2Vzc29ycyBhcmUgbm90IHdvcmtpbmdcclxuXHRcdFx0XHRcdFx0XHRIVE1MNV9ET01TdHJpbmdNYXBbcHJvcE5hbWVdID0gYXR0clZhbDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gSFRNTDVfRE9NU3RyaW5nTWFwO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gRkYgZW51bWVyYXRlcyBvdmVyIGVsZW1lbnQncyBkYXRhc2V0LCBidXQgbm90XHJcblx0XHRcdC8vICAgRWxlbWVudC5wcm90b3R5cGUuZGF0YXNldDsgSUU5IGl0ZXJhdGVzIG92ZXIgYm90aFxyXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsICdkYXRhc2V0JywgcHJvcERlc2NyaXB0b3IpO1xyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRwcm9wRGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZmFsc2U7IC8vIElFOCBkb2VzIG5vdCBhbGxvdyBzZXR0aW5nIHRvIHRydWVcclxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCAnZGF0YXNldCcsIHByb3BEZXNjcmlwdG9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFJldHVybiB0cnVlIGlmIGFueSBhbmNlc3RvciBtYXRjaGVzIHNlbGVjdG9yXHJcblx0Ly8gQm9ycm93ZWQgZnJvbSBhbmNlc3Rvck1hdGNoZXMoKSBmcm9tIGFnYXZlLmpzIChNSVQpXHJcblx0dmFyIGlzQW5jZXN0b3JPZiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yLCBpbmNsdWRlU2VsZikge1xyXG5cdFx0dmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHRcdGlmICggaW5jbHVkZVNlbGYgJiYgZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSApIHtcclxuXHRcdFx0cmV0dXJuIHRydWVcclxuXHRcdH1cclxuXHRcdC8vIFdoaWxlIHBhcmVudHMgYXJlICdlbGVtZW50JyB0eXBlIG5vZGVzXHJcblx0XHQvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vTm9kZS5ub2RlVHlwZVxyXG5cdFx0d2hpbGUgKCBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSApIHtcclxuXHRcdFx0aWYgKCBwYXJlbnQubWF0Y2hlcyhzZWxlY3RvcikgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWVcclxuXHRcdFx0fVxyXG5cdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9O1xyXG5cclxuXHJcblx0Ly8gVXNlZCB0byBtYXRjaCBzZWxlY3QgYm94ZXMgdG8gdGhlaXIgc3R5bGUgc2VsZWN0IHBhcnRuZXJzXHJcblx0dmFyIG1ha2VVVUlEID0gZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiAnc3MteHh4eC14eHh4LXh4eHgteHh4eC14eHh4Jy5yZXBsYWNlKC94L2csIGZ1bmN0aW9uIChjKSB7XHJcblx0XHRcdHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCwgdiA9IGMgPT0gJ3gnID8gciA6IHIgJiAweDMgfCAweDg7XHJcblx0XHRcdHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuXHRcdH0pXHJcblx0fTtcclxuXHJcblxyXG5cdC8vIFRoZSAnc3R5bGVTZWxlY3QnIG1haW4gZnVuY3Rpb25cclxuXHQvLyBzZWxlY3RvcjpTdHJpbmcgLSBDU1Mgc2VsZWN0b3IgZm9yIHRoZSBzZWxlY3QgYm94IHRvIHN0eWxlXHJcblx0cmV0dXJuIGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcblxyXG5cdFx0Ly8gVXNlIG5hdGl2ZSBzZWxlY3RzICh3aGljaCBwb3AgdXAgbGFyZ2UgbmF0aXZlIFVJcyB0byBnbyB0aHJvdWdoIHRoZSBvcHRpb25zICkgb24gaU9TL0FuZHJvaWRcclxuXHRcdGlmICggbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCggL2lQYWR8aVBob25lfEFuZHJvaWQvaSApICkge1xyXG5cdFx0XHRyZXR1cm5cclxuXHRcdH1cclxuXHJcblx0XHR2YXIgcmVhbFNlbGVjdCA9IHF1ZXJ5KHNlbGVjdG9yKSxcclxuXHRcdFx0cmVhbE9wdGlvbnMgPSByZWFsU2VsZWN0LmNoaWxkcmVuLFxyXG5cdFx0XHRzZWxlY3RlZEluZGV4ID0gcmVhbFNlbGVjdC5zZWxlY3RlZEluZGV4LFxyXG5cdFx0XHR1dWlkID0gbWFrZVVVSUQoKSxcclxuXHRcdFx0c3R5bGVTZWxlY3RIVE1MID0gJzxkaXYgY2xhc3M9XCJzdHlsZS1zZWxlY3RcIiBhcmlhLWhpZGRlbj1cInRydWVcIiBkYXRhLXNzLXV1aWQ9XCInICsgdXVpZCArICdcIj4nO1xyXG5cclxuXHRcdC8vIFRoZSBpbmRleCBvZiB0aGUgaXRlbSB0aGF0J3MgYmVpbmcgaGlnaGxpZ2h0ZWQgYnkgdGhlIG1vdXNlIG9yIGtleWJvYXJkXHJcblx0XHR2YXIgaGlnaGxpZ2h0ZWRPcHRpb25JbmRleDtcclxuXHRcdHZhciBoaWdobGlnaHRlZE9wdGlvbkluZGV4TWF4ID0gcmVhbE9wdGlvbnMubGVuZ3RoIC0gMTtcclxuXHJcblx0XHRyZWFsU2VsZWN0LnNldEF0dHJpYnV0ZSgnZGF0YS1zcy11dWlkJywgdXVpZCk7XHJcblx0XHQvLyBFdmVuIHRob3VnaCB0aGUgZWxlbWVudCBpcyBkaXNwbGF5OiBub25lLCBhMTF5IHVzZXJzIHNob3VsZCBzdGlsbCBzZWUgaXQuXHJcblx0XHQvLyBBY2NvcmRpbmcgdG8gaHR0cDovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEvc3RhdGVzX2FuZF9wcm9wZXJ0aWVzI2FyaWEtaGlkZGVuXHJcblx0XHQvLyBzb21lIGJyb3dzZXJzIG1heSBoYXZlIGJ1Z3Mgd2l0aCB0aGlzIGJ1dCBmdXR1cmUgaW1wbGVtZW50YXRpb24gbWF5IGltcHJvdmVcclxuXHRcdHJlYWxTZWxlY3Quc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIFwiZmFsc2VcIik7XHJcblxyXG5cdFx0Ly8gQnVpbGQgc3R5bGVkIGNsb25lcyBvZiBhbGwgdGhlIHJlYWwgb3B0aW9uc1xyXG5cdFx0dmFyIHNlbGVjdGVkT3B0aW9uSFRNTDtcclxuXHRcdHZhciBvcHRpb25zSFRNTCA9ICc8ZGl2IGNsYXNzPVwic3MtZHJvcGRvd25cIj4nO1xyXG5cdFx0cmVhbE9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbihyZWFsT3B0aW9uLCBpbmRleCl7XHJcblx0XHRcdHZhciB0ZXh0ID0gcmVhbE9wdGlvbi50ZXh0Q29udGVudCxcclxuXHRcdFx0XHR2YWx1ZSA9IHJlYWxPcHRpb24uZ2V0QXR0cmlidXRlKCd2YWx1ZScpIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgY3NzQ2xhc3MgPSAnc3Mtb3B0aW9uJyxcclxuICAgICAgICAgICAgICAgIHRleHQyID0gJ1NlbGVjdCBTb21ldGhpbmcnO1xyXG5cclxuXHRcdFx0aWYgKGluZGV4ID09PSBzZWxlY3RlZEluZGV4KSB7XHJcblx0XHRcdFx0Ly8gTWFyayBmaXJzdCBpdGVtIGFzIHNlbGVjdGVkLW9wdGlvbiAtIHRoaXMgaXMgd2hlcmUgd2Ugc3RvcmUgc3RhdGUgZm9yIHRoZSBzdHlsZWQgc2VsZWN0IGJveFxyXG5cdFx0XHRcdC8vIGFyaWEtaGlkZGVuPXRydWUgc28gc2NyZWVuIHJlYWRlcnMgaWdub3JlIHRoZSBzdHlsZXMgc2VsZXh0IGJveCBpbiBmYXZvciBvZiB0aGUgcmVhbCBvbmUgKHdoaWNoIGlzIHZpc2libGUgYnkgZGVmYXVsdClcclxuXHRcdFx0XHRzZWxlY3RlZE9wdGlvbkhUTUwgPSAnPGRpdiBjbGFzcz1cInNzLXNlbGVjdGVkLW9wdGlvblwiIHRhYmluZGV4PVwiMFwiIGRhdGEtdmFsdWU9XCJTZWxlY3QgU29tZXRoaW5nXCI+JyArIHRleHQyICsgJzwvZGl2PidcclxuXHRcdFx0fVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYWxPcHRpb24uZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNzc0NsYXNzICs9ICcgZGlzYWJsZWQnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb250aW51ZSBidWlsZGluZyBvcHRpb25zSFRNTFxyXG5cdFx0XHRvcHRpb25zSFRNTCArPSAnPGRpdiBjbGFzcz1cIicgKyBjc3NDbGFzcyArICdcIiBkYXRhLXZhbHVlPVwiJyArIHZhbHVlICsgJ1wiPicgKyB0ZXh0ICsgJzwvZGl2Pic7XHJcblx0XHR9KTtcclxuXHRcdG9wdGlvbnNIVE1MICs9ICc8L2Rpdj4nO1xyXG5cdFx0c3R5bGVTZWxlY3RIVE1MICs9IHNlbGVjdGVkT3B0aW9uSFRNTCArPSBvcHRpb25zSFRNTCArPSAnPC9kaXY+JztcclxuXHRcdC8vIEFuZCBhZGQgb3V0IHN0eWxlZCBzZWxlY3QganVzdCBhZnRlciB0aGUgcmVhbCBzZWxlY3RcclxuXHRcdHJlYWxTZWxlY3QuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIHN0eWxlU2VsZWN0SFRNTCk7XHJcblxyXG5cdFx0dmFyIHN0eWxlZFNlbGVjdCA9IHF1ZXJ5KCcuc3R5bGUtc2VsZWN0W2RhdGEtc3MtdXVpZD1cIicrdXVpZCsnXCJdJyk7XHJcblx0XHR2YXIgc3R5bGVTZWxlY3RPcHRpb25zID0gc3R5bGVkU2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zcy1vcHRpb24nKTtcclxuXHRcdHZhciBzZWxlY3RlZE9wdGlvbiA9IHN0eWxlZFNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuc3Mtc2VsZWN0ZWQtb3B0aW9uJyk7XHJcblxyXG5cdFx0dmFyIGNoYW5nZVJlYWxTZWxlY3RCb3ggPSBmdW5jdGlvbihuZXdWYWx1ZSwgbmV3TGFiZWwpIHtcclxuXHRcdFx0Ly8gQ2xvc2Ugc3R5bGVkU2VsZWN0XHJcblx0XHRcdHN0eWxlZFNlbGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgc3R5bGVkIHZhbHVlXHJcblx0XHRcdHNlbGVjdGVkT3B0aW9uLnRleHRDb250ZW50ID0gbmV3TGFiZWw7XHJcblx0XHRcdHNlbGVjdGVkT3B0aW9uLmRhdGFzZXQudmFsdWUgPSBuZXdWYWx1ZTtcclxuXHJcblx0XHRcdC8vIFVwZGF0ZSB0aGUgJ3RpY2snIHRoYXQgc2hvd3MgdGhlIG9wdGlvbiB3aXRoIHRoZSBjdXJyZW50IHZhbHVlXHJcblx0XHRcdHN0eWxlU2VsZWN0T3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHN0eWxlU2VsZWN0T3B0aW9uKXtcclxuXHRcdFx0XHRpZiAoIHN0eWxlU2VsZWN0T3B0aW9uLmRhdGFzZXQudmFsdWUgPT09IG5ld1ZhbHVlKSB7XHJcblx0XHRcdFx0XHRzdHlsZVNlbGVjdE9wdGlvbi5jbGFzc0xpc3QuYWRkKCd0aWNrZWQnKVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzdHlsZVNlbGVjdE9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCd0aWNrZWQnKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgcmVhbCBzZWxlY3QgYm94XHJcblx0XHRcdHJlYWxTZWxlY3QudmFsdWUgPSBuZXdWYWx1ZTtcclxuXHJcblx0XHRcdC8vIFNlbmQgJ2NoYW5nZScgZXZlbnQgdG8gcmVhbCBzZWxlY3QgLSB0byB0cmlnZ2VyIGFueSBjaGFuZ2UgZXZlbnQgbGlzdGVuZXJzXHJcblx0XHRcdHZhciBjaGFuZ2VFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2hhbmdlJyk7XHJcblx0XHRcdHJlYWxTZWxlY3QuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIENoYW5nZSByZWFsIHNlbGVjdCBib3ggd2hlbiBhIHN0eWxlZCBvcHRpb24gaXMgY2xpY2tlZFxyXG5cdFx0c3R5bGVTZWxlY3RPcHRpb25zLmZvckVhY2goZnVuY3Rpb24odW51c2VkLCBpbmRleCl7XHJcblx0XHRcdHZhciBzdHlsZVNlbGVjdE9wdGlvbiA9IHN0eWxlU2VsZWN0T3B0aW9ucy5pdGVtKGluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdHlsZVNlbGVjdE9wdGlvbi5jbGFzc05hbWUubWF0Y2goL1xcYmRpc2FibGVkXFxiLykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3R5bGVTZWxlY3RPcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xyXG5cdFx0XHRcdHZhciB0YXJnZXQgPSBldi50YXJnZXQsXHJcblx0XHRcdFx0XHRzdHlsZWRTZWxlY3RCb3ggPSB0YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLFxyXG5cdFx0XHRcdFx0dXVpZCA9IHN0eWxlZFNlbGVjdEJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3MtdXVpZCcpLFxyXG5cdFx0XHRcdFx0bmV3VmFsdWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJyksXHJcblx0XHRcdFx0XHRuZXdMYWJlbCA9IHRhcmdldC50ZXh0Q29udGVudDtcclxuXHJcblx0XHRcdFx0Y2hhbmdlUmVhbFNlbGVjdEJveChuZXdWYWx1ZSwgbmV3TGFiZWwpXHJcblxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFRpY2sgYW5kIGhpZ2hsaWdodCB0aGUgb3B0aW9uIHRoYXQncyBjdXJyZW50bHkgaW4gdXNlXHJcblx0XHRcdGlmICggc3R5bGVTZWxlY3RPcHRpb24uZGF0YXNldC52YWx1ZSA9PT0gcmVhbFNlbGVjdC52YWx1ZSApIHtcclxuXHRcdFx0XHRoaWdobGlnaHRlZE9wdGlvbkluZGV4ID0gaW5kZXg7XHJcblx0XHRcdFx0c3R5bGVTZWxlY3RPcHRpb24uY2xhc3NMaXN0LmFkZCgndGlja2VkJyk7XHJcblx0XHRcdFx0c3R5bGVTZWxlY3RPcHRpb24uY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0ZWQnKVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJbXBvcnRhbnQ6IHdlIGNhbid0IHVzZSAnOmhvdmVyJyBhcyB0aGUga2V5Ym9hcmQgYW5kIGRlZmF1bHQgdmFsdWUgY2FuIGFsc28gc2V0IHRoZSBoaWdobGlnaHRcclxuXHRcdFx0c3R5bGVTZWxlY3RPcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZXYpe1xyXG5cdFx0XHRcdHN0eWxlU2VsZWN0T3B0aW9uLnBhcmVudE5vZGUuY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKHNpYmxpbmcsIGluZGV4KXtcclxuXHRcdFx0XHRcdGlmICggc2libGluZyA9PT0gZXYudGFyZ2V0ICkge1xyXG5cdFx0XHRcdFx0XHRzaWJsaW5nLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodGVkJyk7XHJcblx0XHRcdFx0XHRcdGhpZ2hsaWdodGVkT3B0aW9uSW5kZXggPSBpbmRleDtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0ZWQnKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHR9KTtcclxuXHJcblx0XHR2YXIgY2xvc2VBbGxTdHlsZVNlbGVjdHMgPSBmdW5jdGlvbihleGNlcHRpb24pe1xyXG5cdFx0XHRxdWVyeUFsbCgnLnN0eWxlLXNlbGVjdCcpLmZvckVhY2goZnVuY3Rpb24oc3R5bGVTZWxlY3RFbCkge1xyXG5cdFx0XHRcdGlmICggc3R5bGVTZWxlY3RFbCAhPT0gZXhjZXB0aW9uICkge1xyXG5cdFx0XHRcdFx0c3R5bGVTZWxlY3RFbC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG4gICAgICAgIHZhciBzZWxlY3RHcmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNzLXNlbGVjdGVkLW9wdGlvbicpWzBdO1xyXG5cdFx0dmFyIHRvZ2dsZVN0eWxlZFNlbGVjdCA9IGZ1bmN0aW9uKHN0eWxlZFNlbGVjdEJveCl7XHJcblx0XHRcdGlmICggISBzdHlsZWRTZWxlY3RCb3guY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykgKSB7XHJcblx0XHRcdFx0Ly8gSWYgd2UncmUgY2xvc2VkIGFuZCBhYm91dCB0byBvcGVuLCBjbG9zZSBvdGhlciBzdHlsZSBzZWxlY3RzIG9uIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RHcmF5LmNsYXNzTGlzdC5hZGQoJ2dyYXknKTtcclxuXHRcdFx0XHRjbG9zZUFsbFN0eWxlU2VsZWN0cyhzdHlsZWRTZWxlY3RCb3gpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0R3JheS5jbGFzc0xpc3QucmVtb3ZlKCdncmF5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdFx0Ly8gVGhlbiB0b2dnbGUgb3Blbi9jbG9zZVxyXG5cdFx0XHRzdHlsZWRTZWxlY3RCb3guY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBXaGVuIGEgc3R5bGVkIHNlbGVjdCBib3ggaXMgY2xpY2tlZFxyXG5cdFx0dmFyIHN0eWxlZFNlbGVjdGVkT3B0aW9uID0gcXVlcnkoJy5zdHlsZS1zZWxlY3RbZGF0YS1zcy11dWlkPVwiJyArIHV1aWQgKyAnXCJdIC5zcy1zZWxlY3RlZC1vcHRpb24nKTtcclxuXHRcdHN0eWxlZFNlbGVjdGVkT3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcclxuXHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0ZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdHRvZ2dsZVN0eWxlZFNlbGVjdChldi50YXJnZXQucGFyZW50Tm9kZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBLZXlib2FyZCBoYW5kbGluZ1xyXG5cdFx0c3R5bGVkU2VsZWN0ZWRPcHRpb24uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2KSB7XHJcblx0XHRcdHZhciBzdHlsZWRTZWxlY3RCb3ggPSBldi50YXJnZXQucGFyZW50Tm9kZTtcclxuXHJcblx0XHRcdHN3aXRjaCAoZXYua2V5Q29kZSkge1xyXG5cdFx0XHRcdGNhc2UgS0VZQ09ERVMuU1BBQ0U6XHJcblx0XHRcdFx0XHQvLyBTcGFjZSBzaG93cyBhbmQgaGlkZXMgc3R5bGVzIHNlbGVjdCBib3hlc1xyXG5cdFx0XHRcdFx0dG9nZ2xlU3R5bGVkU2VsZWN0KHN0eWxlZFNlbGVjdEJveCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIEtFWUNPREVTLkRPV046XHJcblx0XHRcdFx0Y2FzZSBLRVlDT0RFUy5VUDpcclxuXHRcdFx0XHRcdC8vIE1vdmUgdGhlIGhpZ2hsaWdodCB1cCBhbmQgZG93blxyXG5cdFx0XHRcdFx0aWYgKCAhIHN0eWxlZFNlbGVjdEJveC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSApIHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgc3R5bGUgc2VsZWN0IGlzIG5vdCBvcGVuLCB1cC9kb3duIHNob3VsZCBvcGVuIGl0LlxyXG5cdFx0XHRcdFx0XHR0b2dnbGVTdHlsZWRTZWxlY3Qoc3R5bGVkU2VsZWN0Qm94KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIElmIHN0eWxlIHNlbGVjdCBpcyBhbHJlYWR5IG9wZW4sIHRoZXNlIHNob3VsZCBjaGFuZ2Ugd2hhdCB0aGUgaGlnaGxpZ2h0ZWQgb3B0aW9uIGlzXHJcblx0XHRcdFx0XHRcdGlmICggZXYua2V5Q29kZSA9PT0gS0VZQ09ERVMuVVAgKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gVXAgYXJyb3cgbW92ZXMgZWFybGllciBpbiBsaXN0XHJcblx0XHRcdFx0XHRcdFx0aWYgKCBoaWdobGlnaHRlZE9wdGlvbkluZGV4ICE9PSAwICkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aGlnaGxpZ2h0ZWRPcHRpb25JbmRleCA9IGhpZ2hsaWdodGVkT3B0aW9uSW5kZXggLSAxXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIERvd24gYXJyb3cgbW92ZXMgbGF0ZXIgaW4gbGlzdFxyXG5cdFx0XHRcdFx0XHRcdGlmICggaGlnaGxpZ2h0ZWRPcHRpb25JbmRleCA8IGhpZ2hsaWdodGVkT3B0aW9uSW5kZXhNYXggKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRoaWdobGlnaHRlZE9wdGlvbkluZGV4ID0gaGlnaGxpZ2h0ZWRPcHRpb25JbmRleCArIDFcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0c3R5bGVTZWxlY3RPcHRpb25zLmZvckVhY2goZnVuY3Rpb24ob3B0aW9uLCBpbmRleCl7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCBpbmRleCA9PT0gaGlnaGxpZ2h0ZWRPcHRpb25JbmRleCApIHtcclxuXHRcdFx0XHRcdFx0XHRcdG9wdGlvbi5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHRlZCcpXHJcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdG9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHRlZCcpXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZXYucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Ly8gVXNlciBoYXMgcGlja2VkIGFuIGl0ZW0gZnJvbSB0aGUga2V5Ym9hcmRcclxuXHRcdFx0XHRjYXNlIEtFWUNPREVTLkVOVEVSOlxyXG5cdFx0XHRcdFx0dmFyIGhpZ2hsaWdodGVkT3B0aW9uID0gc3R5bGVkU2VsZWN0ZWRPcHRpb24ucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuc3Mtb3B0aW9uJylbaGlnaGxpZ2h0ZWRPcHRpb25JbmRleF0sXHJcblx0XHRcdFx0XHRcdG5ld1ZhbHVlID0gaGlnaGxpZ2h0ZWRPcHRpb24uZGF0YXNldC52YWx1ZSxcclxuXHRcdFx0XHRcdFx0bmV3TGFiZWwgPSBoaWdobGlnaHRlZE9wdGlvbi50ZXh0Q29udGVudDtcclxuXHJcblx0XHRcdFx0XHRjaGFuZ2VSZWFsU2VsZWN0Qm94KG5ld1ZhbHVlLCBuZXdMYWJlbCk7XHJcblx0XHRcdFx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0ZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ2xpY2tpbmcgb3V0c2lkZSBvZiB0aGUgc3R5bGVkIHNlbGVjdCBib3ggY2xvc2VzIGFueSBvcGVuIHN0eWxlZCBzZWxlY3QgYm94ZXNcclxuXHRcdHF1ZXJ5KCdib2R5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldil7XHJcblxyXG5cdFx0XHRpZiAoICEgaXNBbmNlc3Rvck9mKGV2LnRhcmdldCwgJy5zdHlsZS1zZWxlY3QnLCB0cnVlKSApIHtcclxuXHRcdFx0XHRjbG9zZUFsbFN0eWxlU2VsZWN0cygpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cclxuXHR9O1xyXG5cclxuXHJcbi8vIENsb3NlIFVNRCBtb2R1bGVcclxufSkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
